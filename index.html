<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Study Discussion Club</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- React + Babel -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Firebase v11 -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyDwbIHTMWM_AQ-NlsdXGDzAfoC8Tf8lZiY",
authDomain: "study-discussion-club.firebaseapp.com",
projectId: "study-discussion-club",
storageBucket: "study-discussion-club.appspot.com",
messagingSenderId: "383378613377",
appId: "1:383378613377:web:3b932c6b42076352811980",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
window._firebase = { auth, db, createUserWithEmailAndPassword, signInWithEmailAndPassword, doc, setDoc };
</script>

<style>
body { margin:0; font-family:'Segoe UI', sans-serif; }
.container { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:20px; min-height:100vh; text-align:center; }
input { padding:10px; border-radius:8px; margin-bottom:10px; width:100%; border:1px solid #ccc; }
button { background-color:#007aff; padding:12px; border-radius:8px; margin-top:10px; width:100%; text-align:center; color:white; font-weight:bold; border:none; cursor:pointer; }
.exam-box, .menu-btn { padding:15px; border-radius:10px; margin:8px; width:90%; max-width:400px; border:1px solid #ccc; cursor:pointer; background-color:#fff; }
.frame-img { width:100%; border:2px solid #007AFF; border-radius:12px; margin-bottom:10px; }
.back-btn { position:absolute; top:20px; left:20px; font-size:20px; cursor:pointer; }
.section-title { font-size:20px; font-weight:bold; margin-bottom:10px; padding:8px; border:1px solid #ccc; border-radius:10px; display:inline-block; background:#fff; }
.notice-box { margin-top:15px; padding:12px; border:1px solid #ccc; border-radius:10px; background:#f0f0f0; font-size:14px; color:#333; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

function App(){
const [screen, setScreen] = useState("welcome");
const [signupData, setSignupData] = useState({username:"", email:"", password:"", mobile:"", pin:""});
const [loginData, setLoginData] = useState({email:"", password:""});
const [selectedExam, setSelectedExam] = useState(null);
const [expiry, setExpiry] = useState(localStorage.getItem("expiry"));

// --- SIGNUP ---
const handleSignup = async () => {
const { auth, db, createUserWithEmailAndPassword, doc, setDoc } = window._firebase;
const { email, password, username, mobile, pin } = signupData;
if(!email||!password){ alert("Please fill all details"); return; }
try{
const userCredential = await createUserWithEmailAndPassword(auth,email,password);
const user = userCredential.user;
await setDoc(doc(db,"users",user.uid),{username,email,mobile,pin,createdAt:new Date().toISOString()});
alert("Signup successful ‚úÖ");
setScreen("examlist");
}catch(err){ alert("Signup failed ‚ùå "+err.message);}
};

// --- LOGIN ---
const handleLogin = async () => {
const { auth, signInWithEmailAndPassword } = window._firebase;
const { email,password } = loginData;
try{
await signInWithEmailAndPassword(auth,email,password);
alert("Login successful ‚úÖ");
setScreen("examlist");
}catch(err){ alert("Login failed ‚ùå "+err.message);}
};

// --- SUBSCRIPTION ---
const handleActivatePlan = () => {
const today = new Date();
const exp = new Date(today.getTime() + 20*24*60*60*1000);
localStorage.setItem("expiry", exp.toDateString());
setExpiry(exp.toDateString());
setScreen("home");
};

// --- PAYMENT ---
const openUPI = () => {
const upiLink = "upi://pay?pa=demo@upi&pn=StudyClub&am=99&cu=INR";
window.location.href = upiLink;
setTimeout(()=>{setScreen("manualVerify");},60000);
};

// --- SCREENS ---
if(screen==="welcome") return (
<div className="container" style={{backgroundColor:"#90EE90"}}>
<h2>Welcome to Study Discussion Club</h2>
<p>Developed by Sajan</p>
<button onClick={()=>setScreen("signup")}>Sign Up</button>
<button onClick={()=>setScreen("login")}>Login</button>
</div>
);

if(screen==="signup"){ 
const filled = Object.values(signupData).every(v=>v.trim()!=="");
return(
<div className="container" style={{backgroundColor:"#89CFF0"}}>
<h2>Signup</h2>
{Object.keys(signupData).map(key=>(
<input key={key} placeholder={key.toUpperCase()} type={key==="password"||key==="pin"?"password":"text"} value={signupData[key]} onChange={e=>setSignupData({...signupData,[key]:e.target.value})}/>
))}
<button style={{backgroundColor:filled?"#007AFF":"gray", cursor:filled?"pointer":"not-allowed"}} onClick={handleSignup}>Signup</button>
<p style={{color:"#007AFF", cursor:"pointer"}} onClick={()=>setScreen("login")}>Already have an account?</p>
</div>
);
}

if(screen==="login") return(
<div className="container" style={{backgroundColor:"#D3D3D3"}}>
<h2>Login</h2>
<input placeholder="Email" value={loginData.email} onChange={e=>setLoginData({...loginData,email:e.target.value})}/>
<input type="password" placeholder="Password" value={loginData.password} onChange={e=>setLoginData({...loginData,password:e.target.value})}/>
<button onClick={handleLogin}>Login</button>
</div>
);

if(screen==="examlist"){
const exams=["UPSC","NEET","JEE","NDA","JUDICIARY"];
return(
<div className="container" style={{backgroundColor:"#FF7F7F"}}>
<h2>Select Exam</h2>
{exams.map(exam=>(
<div key={exam} className="exam-box" style={{backgroundColor:selectedExam===exam?"#FF4500":"#fff"}} onClick={()=>setSelectedExam(exam)}>{exam}</div>
))}
<button disabled={!selectedExam} style={{backgroundColor:selectedExam?"#007AFF":"gray", cursor:selectedExam?"pointer":"not-allowed"}} onClick={()=>setScreen("payment")}>Next</button>
</div>
);
}

// --- PAYMENT SCREEN ---
if(screen==="payment"){
return(
<div className="container" style={{backgroundColor:"#FFFACD"}}>
<h2>Subscription</h2>
<div className="notice-box">
<p>‚úÖ Daily Current Affairs<br/>
‚úÖ Daily Practice Questions<br/>
‚úÖ Mind Maps<br/>
‚úÖ Books Summary<br/>
‚úÖ Discussion & Contest Entry</p>
</div>
<button onClick={openUPI}>Pay Now</button>
<input placeholder="Enter Code (BIGHIT)" onChange={e=>setScreen(e.target.value==="BIGHIT"?"home":screen)}/>
<div className="notice-box">
<p>Dear user, if we do not receive your payment response, our team will manually verify and activate your subscription.</p>
</div>
</div>
);
}

// --- MANUAL VERIFY ---
if(screen==="manualVerify"){
return(
<div className="container" style={{backgroundColor:"#F0F0F0"}}>
<h2>Manual Verification</h2>
<input placeholder="Full Name"/>
<input placeholder="Mobile Number"/>
<input placeholder="Your UPI ID"/>
<button onClick={handleActivatePlan}>Submit for Verification</button>
<div className="notice-box">
<p>Our team will verify your payment within 12 hours and activate your subscription.</p>
</div>
</div>
);
}

// --- HOME ---
if(screen==="home"){
const menu=[
{title:"üìå Current Affairs", bg:"#FFD700", img:"https://raw.githubusercontent.com/Sajanpreet35/Baba/main/images/current-affairs.jpg"},
{title:"üìù Practice Questions", bg:"#90EE90", img:"https://raw.githubusercontent.com/Sajanpreet35/Sajan/main/images/practice-questions.jpg"},
{title:"üß† Mind Maps", bg:"#87CEFA", img:"https://raw.githubusercontent.com/Sajanpreet35/Current-affairs-json/main/images/mindmap.jpg"},
{title:"üìö Books Summary", bg:"#FFB6C1", img:"https://raw.githubusercontent.com/Sajanpreet35/Snack-/main/images/books-summary.jpg"},
{title:"üé§ Interview", bg
